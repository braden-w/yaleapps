---
import { db } from '@repo/db/courses'
import Layout from '../../layouts/Layout.astro'
import { CoursesDataTable } from './_/CoursesDataTable'

const allCourses = await db.query.courses.findMany({
	limit: 10,
	where: (courses, { eq }) => eq(courses.season_code, '202401'),
	with: {
		listings: true,
	},
})
---

<Layout title="Welcome to Astro.">
	<CoursesDataTable courses={allCourses} client:load />
</Layout>
